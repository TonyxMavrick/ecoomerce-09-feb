<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - ElanWear</title>
  <meta name="description" content="Review your shopping cart and proceed to checkout.">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <!-- Header Container -->
  <div id="header-container"></div>

  <!-- Main Content -->
  <main class="min-h-screen bg-white" id="cart-container">
    <!-- Cart will be rendered here -->
  </main>

  <!-- Footer Container -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script src="js/products.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/common.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      renderCart();
      lucide.createIcons();
      
      // Listen for cart updates
      cartManager.addListener(renderCart);
    });

    function renderCart() {
      const container = document.getElementById('cart-container');
      const cart = cartManager.getCart();

      if (cart.length === 0) {
        container.innerHTML = `
          <div class="flex items-center justify-center" style="min-height: 60vh;">
            <div class="text-center">
              <i data-lucide="shopping-bag" class="w-24 h-24 mx-auto mb-6 text-neutral-300"></i>
              <h2 class="text-3xl mb-4 tracking-tight font-medium">Your cart is empty</h2>
              <p class="text-neutral-600 mb-8">
                Looks like you haven't added anything to your cart yet.
              </p>
              <a href="shop.html" class="inline-block bg-black text-white px-8 py-4 hover:bg-neutral-800 transition-colors font-medium">
                Continue Shopping
              </a>
            </div>
          </div>
        `;
        lucide.createIcons();
        return;
      }

      const total = cartManager.getCartTotal();

      container.innerHTML = `
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <h1 class="text-4xl mb-8 tracking-tight font-medium">Shopping Cart</h1>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Cart Items -->
            <div class="lg:col-span-2 space-y-4">
              ${cart.map((item, index) => `
                <div class="flex gap-4 bg-neutral-50 p-4" style="animation: fadeIn 0.5s ease ${index * 0.1}s both">
                  <!-- Product Image -->
                  <a href="product.html?id=${item.id}" class="w-32 h-32 flex-shrink-0 bg-neutral-200 overflow-hidden">
                    <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover hover:scale-105 transition-transform">
                  </a>

                  <!-- Product Info -->
                  <div class="flex-1 flex flex-col justify-between">
                    <div>
                      <a href="product.html?id=${item.id}">
                        <h3 class="mb-1 font-medium hover:text-neutral-600 transition-colors">${item.name}</h3>
                      </a>
                      <p class="text-sm text-neutral-500 mb-2">${item.category}</p>
                      ${item.selectedSize ? `<p class="text-sm text-neutral-600">Size: ${item.selectedSize}</p>` : ''}
                    </div>

                    <div class="flex items-end justify-between">
                      <!-- Quantity Controls -->
                      <div class="flex items-center gap-3">
                        <button onclick="updateItemQuantity('${item.cartItemId}', ${item.quantity - 1})" class="w-8 h-8 border border-neutral-300 hover:border-black transition-colors flex items-center justify-center font-medium">
                          -
                        </button>
                        <span class="w-8 text-center font-medium">${item.quantity}</span>
                        <button onclick="updateItemQuantity('${item.cartItemId}', ${item.quantity + 1})" class="w-8 h-8 border border-neutral-300 hover:border-black transition-colors flex items-center justify-center font-medium">
                          +
                        </button>
                      </div>

                      <p class="text-lg font-medium">$${(item.price * item.quantity).toFixed(2)}</p>
                    </div>
                  </div>

                  <!-- Remove Button -->
                  <button onclick="removeItem('${item.cartItemId}')" class="text-neutral-400 hover:text-red-500 transition-colors">
                    <i data-lucide="trash-2" class="w-5 h-5"></i>
                  </button>
                </div>
              `).join('')}
            </div>

            <!-- Order Summary -->
            <div class="lg:col-span-1">
              <div class="bg-neutral-50 p-6 sticky top-24">
                <h2 class="text-2xl mb-6 tracking-tight font-medium">Order Summary</h2>

                <div class="space-y-3 mb-6 pb-6 border-b border-neutral-200">
                  <div class="flex justify-between text-neutral-600">
                    <span>Subtotal</span>
                    <span>$${total.toFixed(2)}</span>
                  </div>
                  <div class="flex justify-between text-neutral-600">
                    <span>Shipping</span>
                    <span>Free</span>
                  </div>
                  <div class="flex justify-between text-neutral-600">
                    <span>Tax</span>
                    <span>Calculated at checkout</span>
                  </div>
                </div>

                <div class="flex justify-between text-xl mb-6 font-medium">
                  <span>Total</span>
                  <span>$${total.toFixed(2)}</span>
                </div>

                <a href="checkout.html" class="block w-full bg-black text-white text-center px-8 py-4 hover:bg-neutral-800 transition-colors mb-4 font-medium">
                  Proceed to Checkout
                </a>

                <a href="shop.html" class="block w-full text-center text-neutral-600 hover:text-black transition-colors">
                  Continue Shopping
                </a>
              </div>
            </div>
          </div>
        </div>
      `;

      lucide.createIcons();
    }

    function updateItemQuantity(cartItemId, newQuantity) {
      cartManager.updateQuantity(cartItemId, newQuantity);
    }

    function removeItem(cartItemId) {
      if (confirm('Are you sure you want to remove this item?')) {
        cartManager.removeFromCart(cartItemId);
        Toast.success('Item removed from cart');
      }
    }
  </script>

  <style>
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</body>
</html>
