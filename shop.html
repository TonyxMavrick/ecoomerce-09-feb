<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop - ElanWear</title>
  <meta name="description" content="Browse our complete collection of premium fashion items. Filter by category and find your perfect style.">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/styles.css">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <!-- Header Container -->
  <div id="header-container"></div>

  <!-- Main Content -->
  <main class="min-h-screen bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <!-- Header -->
      <div class="mb-8">
        <h1 class="text-4xl mb-4 tracking-tight font-medium">Shop All Products</h1>
        <p class="text-neutral-600 text-lg">
          Discover our complete collection of premium fashion
        </p>
      </div>

      <!-- Filters -->
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8 pb-6 border-b border-neutral-200">
        <!-- Category Filter -->
        <div class="flex flex-wrap gap-2" id="category-filters">
          <button onclick="filterByCategory('All')" class="category-btn px-4 py-2 text-sm transition-colors bg-black text-white" data-category="All">
            All
          </button>
          <!-- Categories will be inserted here -->
        </div>

        <!-- Sort Filter -->
        <div class="flex items-center gap-2">
          <label for="sort" class="text-sm text-neutral-600 font-medium">Sort by:</label>
          <select id="sort" onchange="sortProducts(this.value)" class="px-4 py-2 border border-neutral-300 bg-white text-sm focus:outline-none focus:border-black">
            <option value="popular">Popular</option>
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
            <option value="name">Name: A to Z</option>
          </select>
        </div>
      </div>

      <!-- Product Count -->
      <p class="text-neutral-600 mb-6" id="product-count">
        Showing <span id="count">0</span> products
      </p>

      <!-- Products Grid -->
      <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- Products will be inserted here -->
      </div>

      <!-- No Results -->
      <div id="no-results" class="hidden text-center py-20">
        <p class="text-neutral-600 text-lg">No products found in this category.</p>
      </div>
    </div>
  </main>

  <!-- Footer Container -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script src="js/products.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/common.js"></script>
  
  <script>
    let currentCategory = 'All';
    let currentSort = 'popular';
    let filteredProducts = [...products];

    // Initialize on load
    document.addEventListener('DOMContentLoaded', function() {
      renderCategoryFilters();
      
      // Check for category from URL
      const urlParams = new URLSearchParams(window.location.search);
      const categoryParam = urlParams.get('category');
      if (categoryParam) {
        currentCategory = categoryParam;
        updateActiveCategory();
      }
      
      updateProductDisplay();
      lucide.createIcons();
    });

    // Render category filter buttons
    function renderCategoryFilters() {
      const container = document.getElementById('category-filters');
      const allBtn = container.querySelector('[data-category="All"]');
      
      categories.forEach(category => {
        const btn = document.createElement('button');
        btn.onclick = () => filterByCategory(category);
        btn.className = 'category-btn px-4 py-2 text-sm transition-colors bg-neutral-100 text-neutral-700 hover:bg-neutral-200';
        btn.setAttribute('data-category', category);
        btn.textContent = category;
        container.appendChild(btn);
      });
    }

    // Filter by category
    function filterByCategory(category) {
      currentCategory = category;
      updateActiveCategory();
      updateProductDisplay();
      
      // Update URL
      const url = new URL(window.location);
      if (category === 'All') {
        url.searchParams.delete('category');
      } else {
        url.searchParams.set('category', category);
      }
      window.history.pushState({}, '', url);
    }

    // Update active category button
    function updateActiveCategory() {
      document.querySelectorAll('.category-btn').forEach(btn => {
        const category = btn.getAttribute('data-category');
        if (category === currentCategory) {
          btn.className = 'category-btn px-4 py-2 text-sm transition-colors bg-black text-white';
        } else {
          btn.className = 'category-btn px-4 py-2 text-sm transition-colors bg-neutral-100 text-neutral-700 hover:bg-neutral-200';
        }
      });
    }

    // Sort products
    function sortProducts(sortType) {
      currentSort = sortType;
      updateProductDisplay();
    }

    // Update product display
    function updateProductDisplay() {
      // Filter products
      filteredProducts = currentCategory === 'All' 
        ? [...products] 
        : products.filter(p => p.category === currentCategory);

      // Sort products
      filteredProducts.sort((a, b) => {
        switch(currentSort) {
          case 'price-low':
            return a.price - b.price;
          case 'price-high':
            return b.price - a.price;
          case 'name':
            return a.name.localeCompare(b.name);
          default:
            return 0;
        }
      });

      renderProducts();
    }

    // Render products
    function renderProducts() {
      const grid = document.getElementById('products-grid');
      const noResults = document.getElementById('no-results');
      const countEl = document.getElementById('count');

      countEl.textContent = filteredProducts.length;

      if (filteredProducts.length === 0) {
        grid.innerHTML = '';
        noResults.classList.remove('hidden');
      } else {
        noResults.classList.add('hidden');
        grid.innerHTML = filteredProducts.map((product, index) => `
          <div class="product-card" style="animation: fadeIn 0.5s ease ${index * 0.05}s both">
            <a href="product.html?id=${product.id}" class="block group">
              <div class="product-image-container mb-4 overflow-hidden">
                <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
              </div>
              <p class="text-sm text-neutral-500 mb-1">${product.category}</p>
              <h3 class="font-medium mb-2 group-hover:text-neutral-600 transition-colors">${product.name}</h3>
              <p class="text-lg font-medium">$${product.price.toFixed(2)}</p>
            </a>
          </div>
        `).join('');
      }
    }
  </script>

  <style>
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</body>
</html>
